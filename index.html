<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Toucher by bh-lay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Toucher</h1>
      <h2 class="project-tagline">面向移动端模拟手势的类库</h2>
      <a href="https://github.com/bh-lay/toucher" class="btn">View on GitHub</a>
      <a href="https://github.com/bh-lay/toucher/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/bh-lay/toucher/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
<h3>左划删除</h3>
<p>移动交互中常用的删除手势，用于删除列表中的对象。相关事件：左划<small>swipeLeft</small>、右划<small>swipeRight</small>、轻击<small>singleTap</small></p>
<div class="list-group" id="listGroupA">
  <div class="list-item">
    <div class="list-item-body">
      剧中人
    </div>
    <div class="list-item-del">
      删除
    </div>
  </div>
</div>
<pre>
<code>util.toucher(document.getElementById('listGroupA'))
.on('swipeLeft','.list-item',function(){
  addClass(this,'list-item-status-del');
  return false;
})
.on('swipeRight','.list-item',function(){
  removeClass(this,'list-item-status-del');
  return false;
})
.on('singleTap','.list-item-del',function(){
  alert('这只是个demo！');
});</code>
</pre>

<h3>长按删除</h3>
<p>移动交互中另一种常用的删除动作，将删除功能已藏在界面不可见的位置以避免误操作。相关事件：长按<small>longTap</small></p>
<div class="list-group" id="listGroupB">
  <div class="list-item">
    <div class="list-item-body">
      剧中人
    </div>
  </div>
</div>
<pre>
<code>util.toucher(document.getElementById('listGroupB'))
.on('longTap','.list-item',function(){
  alert('这只是个demo！');
});</code>
</pre>

<h3>拖动</h3>
<p>移动交互中另一种常用的删除动作，将删除功能已藏在界面不可见的位置以避免误操作。相关事件：长按<small>longTap</small></p>
<div class="assistive-touch-cnt">
  <div class="assistiveTouch" id="assistiveTouch"><span></span></div>
</div>
<pre>
<code>var stsrt_x,start_y;
util.toucher(document.getElementById('assistiveTouch'))
.on('swipeStart',function(e){
  start_x = parseInt(this.style.left) || 0;
  start_y = parseInt(this.style.top) || 0;
}).on('swipe',function(e){
  this.style.left = (start_x + e.moveX) + 'px';
  this.style.top = (start_y + e.moveY) + 'px';
  return false;
});</code>
</pre>
    </section>
<script src="toucher.js"></script>
<script>
  /**
   * 判断dom是否拥有某个class
   */
  function hasClass(dom,classSingle){
    return dom.className && dom.className.match(new RegExp('(\\s|^)' + classSingle + '(\\s|$)')) || false;
  }
  function addClass(dom, cls) {
    if (!this.hasClass(dom, cls)) dom.className += " " + cls;
  }
  function removeClass(dom, cls) {
    if (hasClass(dom, cls)) {
      var reg = new RegExp('(\\s+|^)' + cls + '(\\s+|$)');
      dom.className = dom.className.replace(reg, ' ');
    }
  }
  var codes = document.querySelectorAll('pre code');
  for(var index=codes.length-1;index>=0;index--){
    eval('(function (){' +  codes[index].innerHTML + '})()')
  }
</script>
</body>
</html>

